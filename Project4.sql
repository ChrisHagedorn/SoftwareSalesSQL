SET ECHO OFF;
DROP TABLE RETAILERTYPE CASCADE CONSTRAINTS;
DROP TABLE VENDOR CASCADE CONSTRAINTS;
DROP TABLE PLATFORM CASCADE CONSTRAINTS;
DROP TABLE SOFTWARE CASCADE CONSTRAINTS;
DROP TABLE RETAILER CASCADE CONSTRAINTS;
DROP TABLE CERTIFICATION CASCADE CONSTRAINTS;
DROP TABLE COMPONENTS CASCADE CONSTRAINTS;
DROP TABLE SALES CASCADE CONSTRAINTS;

--Part 1: Table Creation
CREATE TABLE RETAILERTYPE(    
    RT_Type_ID int NOT NULL, 
    RT_Type_Name varchar(255), 
    PRIMARY KEY (RT_Type_ID)
);
CREATE TABLE VENDOR( 
    Vendor_Nbr int NOT NULL, 
    Vendor_Name varchar(255), 
    PRIMARY KEY (Vendor_NBR) 
     
);
CREATE TABLE PLATFORM( 
    Platform_Nbr int NOT NULL, 
    Platform_Desc varchar(255), 
    Platform_Processor varchar(255),
    PRIMARY KEY (Platform_Nbr) 
     
); 
CREATE TABLE SOFTWARE( 
    Software_ID int NOT NULL,
    SW_Name varchar(255),
    SW_Version varchar(255),
    SW_Sugg_Ret_Price int,
    Vendor_Nbr int,
    PRIMARY KEY (Software_ID),
    FOREIGN KEY (Vendor_Nbr) REFERENCES VENDOR(Vendor_Nbr)
); 
CREATE TABLE RETAILER( 
    Retailer_ID int NOT NULL,
    Retailer_Name varchar(255),
    Retailer_State varchar(255),
    RT_Type_ID int,
    PRIMARY KEY (Retailer_ID),
    FOREIGN KEY (RT_Type_ID) REFERENCES RETAILERTYPE(RT_Type_ID)
); 
CREATE TABLE CERTIFICATION( 
    Platform_Nbr int,
    Software_ID int,
    Certif_Staff varchar(255),
    Certif_Date Date,
    Certif_Exp_Date Date,
    FOREIGN KEY (Software_ID) REFERENCES SOFTWARE(Software_ID),
    FOREIGN KEY (Platform_Nbr) REFERENCES PLATFORM(Platform_Nbr)
); 
CREATE TABLE COMPONENTS(
    Components int NOT NULL,
    Vendor_Nbr int,
    PRIMARY KEY (Components, Vendor_Nbr),
    FOREIGN KEY (Components) REFERENCES VENDOR(Vendor_Nbr),
    FOREIGN KEY (Vendor_Nbr) REFERENCES VENDOR(Vendor_Nbr)
); 
CREATE TABLE SALES(
    Retailer_ID int,
    Software_ID int,
    Price int,
    Availability varchar(1), --Since Y/N is used, varchar 1 provides more readability then BIT data structure.
    FOREIGN KEY (Retailer_ID) REFERENCES RETAILER(Retailer_ID),
    FOREIGN KEY (Software_ID) REFERENCES SOFTWARE(Software_ID)
); 

--Part 2: Inserting Data

--RetailType
INSERT INTO RETAILERTYPE VALUES(1,'Mail Order');
INSERT INTO RETAILERTYPE VALUES(2,'Electronics Retailer');
INSERT INTO RETAILERTYPE VALUES(3,'Specialized Software');
INSERT INTO RETAILERTYPE VALUES(4,'Discount store');
INSERT INTO RETAILERTYPE VALUES(5,'Bookstore');

--Vendor
INSERT INTO VENDOR VALUES(1,'Microsoft');
INSERT INTO VENDOR VALUES(2,'Borland');
INSERT INTO VENDOR VALUES(3,'Adobe');
INSERT INTO VENDOR VALUES(4,'Corel');
INSERT INTO VENDOR VALUES(5,'Intuit');
INSERT INTO VENDOR VALUES(6,'SonicFoundry');

--Platform
INSERT INTO PLATFORM VALUES(1,'Intel 1','Pentium III');
INSERT INTO PLATFORM VALUES(2,'Intel 2','Pentium IV');
INSERT INTO PLATFORM VALUES(3,'PowerPC','PowerPC');
INSERT INTO PLATFORM VALUES(4,'AMD','Athlon');
INSERT INTO PLATFORM VALUES(5,'AMD','Opteron');
INSERT INTO PLATFORM VALUES(6,'HP','AlphaServer');

--Software
INSERT INTO SOFTWARE VALUES(1,'MS Word',129, 2013, 1);
INSERT INTO SOFTWARE VALUES(2,'MS Excel',180, 2013, 1);
INSERT INTO SOFTWARE VALUES(3,'Quicken',39, 2013, 5);
INSERT INTO SOFTWARE VALUES(4,'Quicken DeLuxe',59, 2013, 5);
INSERT INTO SOFTWARE VALUES(5,'WordPerfect',159, 10, 4);
INSERT INTO SOFTWARE VALUES(6,'Acrobat Reader',0, 6, 3);
INSERT INTO SOFTWARE VALUES(7,'Acrobat',99, 6, 3);
INSERT INTO SOFTWARE VALUES(8,'Delphi',599, 2015, 2);
INSERT INTO SOFTWARE VALUES(9,'SoundForge',149, 7, 6);
INSERT INTO SOFTWARE VALUES(10,'MS Access',249, 2013, 1);

--Retailer
INSERT INTO RETAILER VALUES(1,'Amazon','WA', 1);
INSERT INTO RETAILER VALUES(2,'Barnes and Noble','NJ', 5); --Changed to and
INSERT INTO RETAILER VALUES(3,'Borders','PA', 5);
INSERT INTO RETAILER VALUES(4,'Tweeter','MA', 2);
INSERT INTO RETAILER VALUES(5,'Circuit City','OH', 2);
INSERT INTO RETAILER VALUES(6,'Bobs Software','MA', 3); --Changed to Bobs
INSERT INTO RETAILER VALUES(7,'Target','MN', 4);

--Certification
INSERT INTO CERTIFICATION VALUES(1,1,'MN',TO_DATE('1/12/2020', 'MM/DD/YYYY'), TO_DATE('1/11/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(1,3,'YA',TO_DATE('2/10/2020', 'MM/DD/YYYY'), TO_DATE('2/9/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(1,5,'TA',TO_DATE('12/01/2019', 'MM/DD/YYYY'), TO_DATE('11/30/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(1,6,'NS',TO_DATE('5/06/2019', 'MM/DD/YYYY'), TO_DATE('5/5/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(1,8,'FA',TO_DATE('1/12/2020', 'MM/DD/YYYY'), TO_DATE('1/11/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(2,2,'MN',TO_DATE('12/01/2019', 'MM/DD/YYYY'), TO_DATE('11/30/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(2,4,'FA',TO_DATE('2/10/2020', 'MM/DD/YYYY'), TO_DATE('2/9/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(2,6,'FA',TO_DATE('10/10/2001', 'MM/DD/YYYY'), TO_DATE('10/9/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(2,9,'NS',TO_DATE('1/12/2021', 'MM/DD/YYYY'), TO_DATE('1/11/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(2,10,'MN',TO_DATE('12/1/2019', 'MM/DD/YYYY'), TO_DATE('11/30/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(3,3,'TA',TO_DATE('10/10/2019', 'MM/DD/YYYY'), TO_DATE('10/9/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(3,5,'MN',TO_DATE('5/6/2019', 'MM/DD/YYYY'), TO_DATE('5/5/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(3,7,'YA',TO_DATE('10/10/2019', 'MM/DD/YYYY'), TO_DATE('10/9/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(3,8,'YA',TO_DATE('1/12/2020', 'MM/DD/YYYY'), TO_DATE('1/11/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(4,1,'FA',TO_DATE('5/6/2019', 'MM/DD/YYYY'), TO_DATE('5/5/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(4,2,'MN',TO_DATE('12/1/2019', 'MM/DD/YYYY'), TO_DATE('11/30/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(4,3,'NS',TO_DATE('2/10/2020', 'MM/DD/YYYY'), TO_DATE('2/9/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(4,4,'TA',TO_DATE('5/6/2019', 'MM/DD/YYYY'), TO_DATE('5/5/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(5,1,'MN',TO_DATE('1/12/2020', 'MM/DD/YYYY'), TO_DATE('1/11/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(5,7,'YA',TO_DATE('12/1/2019', 'MM/DD/YYYY'), TO_DATE('11/30/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(6,4,'FA',TO_DATE('2/10/2020', 'MM/DD/YYYY'), TO_DATE('2/9/2021', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(6,6,'MN',TO_DATE('5/6/2019', 'MM/DD/YYYY'), TO_DATE('5/5/2020', 'MM/DD/YYYY'));
INSERT INTO CERTIFICATION VALUES(6,6,'MN',TO_DATE('2/10/2020', 'MM/DD/YYYY'), TO_DATE('2/9/2021', 'MM/DD/YYYY'));

--Components
INSERT INTO COMPONENTS VALUES(1,6);
INSERT INTO COMPONENTS VALUES(1,3);
INSERT INTO COMPONENTS VALUES(4,2);
INSERT INTO COMPONENTS VALUES(5,2);
INSERT INTO COMPONENTS VALUES(5,6);

--Sales *still needed bit/?
INSERT INTO SALES VALUES(1,1,129, 'Y');
INSERT INTO SALES VALUES(1,2,115, 'Y');
INSERT INTO SALES VALUES(1,3,122, 'Y');
INSERT INTO SALES VALUES(2,1,180, 'Y');
INSERT INTO SALES VALUES(2,2,160, 'N');
INSERT INTO SALES VALUES(2,3,168, 'N');
INSERT INTO SALES VALUES(3,3,38, 'Y');
INSERT INTO SALES VALUES(3,4,35, 'Y');
INSERT INTO SALES VALUES(4,3,69, 'N');
INSERT INTO SALES VALUES(4,4,35, 'Y');
INSERT INTO SALES VALUES(7,9,99, 'Y');
INSERT INTO SALES VALUES(7,9,99, 'Y');
INSERT INTO SALES VALUES(7,10,99, 'N');
--INSERT INTO SALES VALUES(8,10,505, 'Y'); integrity constraint parent key not found. No Retailer with ID 8.
--INSERT INTO SALES VALUES(9,6,149, 'Y'); integrity constraint parent key not found. No Retailer with ID 9.
--INSERT INTO SALES VALUES(10,1,249, 'N'); integrity constraint parent key not found. Perhaps 10 was entered instead of 1?
--INSERT INTO SALES VALUES(10,2,249, 'N'); integrity constraint parent key not found. Perhaps 10 was entered instead of 1?
--INSERT INTO SALES VALUES(10,3,249, 'Y'); integrity constraint parent key not found. Perhaps 10 was entered instead of 1?

commit;